services:

  base:
    image: base:latest

    build:
      context: .
      dockerfile: Dockerfile.base
      args:
      - USER_ID
      - GROUP_ID

    volumes:
    - ./rails:/opt/app:Z

    ports:
    - "3000:3000"

    depends_on:
    - db

    command: bin/rails s -p 3000 -b 0.0.0.0

  db:
    image: postgres

    volumes:
    - ./.postgresql-data/data:/var/lib/postgresql/data:Z

    environment:
      POSTGRES_PASSWORD: notsecure123
